<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Character Game</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.2) 0%, transparent 40%),
                linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 50%, #98D8C8 100%);
            font-family: 'Press Start 2P', Arial, sans-serif;
            overflow: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 120px;
            background: linear-gradient(to bottom, transparent, #7CB342 20%, #558B2F);
        }

        /* Clouds */
        .cloud {
            position: absolute;
            background: white;
            border-radius: 100px;
            opacity: 0.8;
        }
        
        .cloud::before,
        .cloud::after {
            content: '';
            position: absolute;
            background: white;
            border-radius: 100px;
        }
        
        .cloud1 {
            width: 80px;
            height: 30px;
            top: 10%;
            left: 10%;
            animation: float 20s infinite ease-in-out;
        }
        
        .cloud1::before {
            width: 40px;
            height: 40px;
            top: -20px;
            left: 10px;
        }
        
        .cloud1::after {
            width: 50px;
            height: 35px;
            top: -15px;
            right: 10px;
        }
        
        .cloud2 {
            width: 100px;
            height: 35px;
            top: 20%;
            right: 15%;
            animation: float 25s infinite ease-in-out 5s;
        }
        
        .cloud2::before {
            width: 50px;
            height: 45px;
            top: -20px;
            left: 15px;
        }
        
        .cloud2::after {
            width: 60px;
            height: 40px;
            top: -18px;
            right: 15px;
        }
        
        .cloud3 {
            width: 70px;
            height: 28px;
            top: 60%;
            left: 5%;
            animation: float 18s infinite ease-in-out 3s;
        }
        
        .cloud3::before {
            width: 35px;
            height: 35px;
            top: -18px;
            left: 8px;
        }
        
        .cloud3::after {
            width: 45px;
            height: 32px;
            top: -15px;
            right: 8px;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        /* Buildings */
        .building {
            position: absolute;
            bottom: 120px;
            background: linear-gradient(to bottom, #546E7A, #37474F);
            border-top: 3px solid #78909C;
        }
        
        .building::after {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            background: repeating-linear-gradient(
                0deg,
                transparent 0px,
                transparent 15px,
                rgba(255,215,0,0.3) 15px,
                rgba(255,215,0,0.3) 18px
            ),
            repeating-linear-gradient(
                90deg,
                transparent 0px,
                transparent 15px,
                rgba(255,215,0,0.3) 15px,
                rgba(255,215,0,0.3) 18px
            );
        }
        
        .building1 {
            width: 120px;
            height: 200px;
            left: 5%;
        }
        
        .building2 {
            width: 100px;
            height: 250px;
            left: 15%;
        }
        
        .building3 {
            width: 90px;
            height: 180px;
            right: 8%;
        }
        
        .building4 {
            width: 110px;
            height: 220px;
            right: 18%;
        }

        .game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        #canvas {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background: 
                repeating-linear-gradient(
                    0deg,
                    #2C3E50 0px,
                    #2C3E50 2px,
                    #34495E 2px,
                    #34495E 20px
                ),
                repeating-linear-gradient(
                    90deg,
                    #2C3E50 0px,
                    #2C3E50 2px,
                    #34495E 2px,
                    #34495E 20px
                );
            border: none;
            box-shadow: 
                inset 0 0 50px rgba(0,0,0,0.8),
                0 20px 60px rgba(0,0,0,0.5);
            position: relative;
        }
        
        #canvas::before {
            content: '';
            position: absolute;
            top: -8px;
            left: -8px;
            right: -8px;
            bottom: -8px;
            background: repeating-linear-gradient(
                90deg,
                #95a5a6 0px,
                #95a5a6 3px,
                transparent 3px,
                transparent 23px
            );
            z-index: 10;
            pointer-events: none;
        }
        
        #canvas::after {
            content: '';
            position: absolute;
            top: -8px;
            left: -8px;
            right: -8px;
            bottom: -8px;
            background: repeating-linear-gradient(
                0deg,
                #95a5a6 0px,
                #95a5a6 3px,
                transparent 3px,
                transparent 23px
            );
            z-index: 10;
            pointer-events: none;
        }

        #character {
            position: absolute;
            width: 40px;
            height: 40px;
        }

        .button-container {
            position: fixed;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            display: grid;
            grid-template-columns: repeat(3, 80px);
            grid-template-rows: repeat(2, 80px);
            gap: 10px;
        }

        button {
            padding: 0;
            width: 80px;
            height: 80px;
            font-size: 24px;
            background-color: #e74c3c;
            color: white;
            border: 4px solid #c0392b;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.1s;
            box-shadow: 0 5px 0 #c0392b;
            font-weight: bold;
        }

        button:hover {
            background-color: #ff6b5a;
        }

        button:active {
            box-shadow: 0 2px 0 #c0392b;
            transform: translateY(3px);
        }

        #upBtn {
            grid-column: 2;
            grid-row: 1;
        }

        #leftBtn {
            grid-column: 1;
            grid-row: 2;
        }

        #rightBtn {
            grid-column: 3;
            grid-row: 2;
        }

        #downBtn {
            grid-column: 2;
            grid-row: 2;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="cloud cloud1"></div>
        <div class="cloud cloud2"></div>
        <div class="cloud cloud3"></div>
        <div class="building building1"></div>
        <div class="building building2"></div>
        <div class="building building3"></div>
        <div class="building building4"></div>
        <canvas id="canvas" width="400" height="400"></canvas>
        <canvas id="character" width="40" height="40"></canvas>
    </div>
    
    <div class="button-container">
        <button id="upBtn">↑</button>
        <button id="leftBtn">←</button>
        <button id="rightBtn">→</button>
        <button id="downBtn">↓</button>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const characterCanvas = document.getElementById('character');
        const charCtx = characterCanvas.getContext('2d');
        const upBtn = document.getElementById('upBtn');
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');
        const downBtn = document.getElementById('downBtn');

        // Get canvas position
        const canvasRect = canvas.getBoundingClientRect();
        
        let player = {
            x: window.innerWidth - 100, // Top right area
            y: 50,
            width: 40,
            height: 40,
            direction: 'front',
            insideCanvas: false
        };

        function drawCharacter(context, direction) {
            context.clearRect(0, 0, 40, 40);
            
            const x = 0;
            const y = 0;
            const size = 40;
            
            if (direction === 'left') {
                // Side view - facing left
                // Head (skin tone)
                context.fillStyle = '#ffcc99';
                context.beginPath();
                context.arc(x + 25, y + 10, 12, 0, Math.PI * 2);
                context.fill();
                
                // Hat (red like Mario)
                context.fillStyle = '#c0392b';
                context.beginPath();
                context.arc(x + 25, y + 8, 14, Math.PI, 0, true);
                context.fill();
                context.fillRect(x + 11, y + 3, 28, 8);
                
                // Eye looking left
                context.fillStyle = '#000000';
                context.fillRect(x + 18, y + 10, 3, 3);
                
                // Nose
                context.fillStyle = '#ffcc99';
                context.fillRect(x + 15, y + 12, 4, 3);
                
                // Mustache
                context.fillStyle = '#654321';
                context.fillRect(x + 15, y + 15, 12, 4);
                
                // Body (red shirt)
                context.fillStyle = '#e74c3c';
                context.fillRect(x + 12, y + 20, 18, 10);
                
                // Arm
                context.fillStyle = '#e74c3c';
                context.fillRect(x + 8, y + 22, 8, 6);
                
                // Overalls
                context.fillStyle = '#3498db';
                context.fillRect(x + 15, y + 28, 8, 8);
                context.fillRect(x + 23, y + 28, 4, 8);
                
                // Leg
                context.fillStyle = '#2980b9';
                context.fillRect(x + 18, y + 30, 6, 6);
                
                // Shoe
                context.fillStyle = '#8B4513';
                context.fillRect(x + 12, y + 36, 12, 4);
                
            } else if (direction === 'right') {
                // Side view - facing right
                // Head (skin tone)
                context.fillStyle = '#ffcc99';
                context.beginPath();
                context.arc(x + 15, y + 10, 12, 0, Math.PI * 2);
                context.fill();
                
                // Hat (red like Mario)
                context.fillStyle = '#c0392b';
                context.beginPath();
                context.arc(x + 15, y + 8, 14, Math.PI, 0, true);
                context.fill();
                context.fillRect(x + 1, y + 3, 28, 8);
                
                // Eye looking right
                context.fillStyle = '#000000';
                context.fillRect(x + 19, y + 10, 3, 3);
                
                // Nose
                context.fillStyle = '#ffcc99';
                context.fillRect(x + 21, y + 12, 4, 3);
                
                // Mustache
                context.fillStyle = '#654321';
                context.fillRect(x + 13, y + 15, 12, 4);
                
                // Body (red shirt)
                context.fillStyle = '#e74c3c';
                context.fillRect(x + 10, y + 20, 18, 10);
                
                // Arm
                context.fillStyle = '#e74c3c';
                context.fillRect(x + 24, y + 22, 8, 6);
                
                // Overalls
                context.fillStyle = '#3498db';
                context.fillRect(x + 13, y + 28, 4, 8);
                context.fillRect(x + 17, y + 28, 8, 8);
                
                // Leg
                context.fillStyle = '#2980b9';
                context.fillRect(x + 16, y + 30, 6, 6);
                
                // Shoe
                context.fillStyle = '#8B4513';
                context.fillRect(x + 16, y + 36, 12, 4);
                
            } else if (direction === 'up') {
                // Back view - facing away
                // Hat back
                context.fillStyle = '#c0392b';
                context.beginPath();
                context.arc(x + size/2, y + 8, 14, 0, Math.PI);
                context.fill();
                context.fillRect(x + size/2 - 14, y + 8, 28, 6);
                
                // Head back
                context.fillStyle = '#ffcc99';
                context.beginPath();
                context.arc(x + size/2, y + 12, 11, 0, Math.PI * 2);
                context.fill();
                
                // Body (red shirt)
                context.fillStyle = '#e74c3c';
                context.fillRect(x + 8, y + 18, 24, 12);
                
                // Overalls straps (back)
                context.fillStyle = '#2980b9';
                context.fillRect(x + 12, y + 20, 4, 10);
                context.fillRect(x + 24, y + 20, 4, 10);
                
                // Overalls bottom
                context.fillStyle = '#3498db';
                context.fillRect(x + 10, y + 28, 9, 8);
                context.fillRect(x + 21, y + 28, 9, 8);
                
                // Legs
                context.fillStyle = '#2980b9';
                context.fillRect(x + 12, y + 30, 6, 6);
                context.fillRect(x + 22, y + 30, 6, 6);
                
                // Shoes
                context.fillStyle = '#8B4513';
                context.fillRect(x + 10, y + 36, 8, 4);
                context.fillRect(x + 22, y + 36, 8, 4);
                
            } else {
                // Front view (default and down)
                // Body (red shirt like Mario)
                context.fillStyle = '#e74c3c';
                context.fillRect(x + 5, y + 15, size - 10, size - 20);
                
                // Head (skin tone)
                context.fillStyle = '#ffcc99';
                context.beginPath();
                context.arc(x + size/2, y + 10, 12, 0, Math.PI * 2);
                context.fill();
                
                // Hat (red like Mario)
                context.fillStyle = '#c0392b';
                context.beginPath();
                context.arc(x + size/2, y + 8, 14, Math.PI, 0, true);
                context.fill();
                context.fillRect(x + size/2 - 16, y + 3, 32, 8);
                
                // Hat emblem
                context.fillStyle = '#ffffff';
                context.beginPath();
                context.arc(x + size/2, y + 7, 5, 0, Math.PI * 2);
                context.fill();
                
                // Eyes
                context.fillStyle = '#000000';
                if (direction === 'down') {
                    context.fillRect(x + 15, y + 12, 3, 3);
                    context.fillRect(x + 22, y + 12, 3, 3);
                } else {
                    context.fillRect(x + 15, y + 10, 3, 3);
                    context.fillRect(x + 22, y + 10, 3, 3);
                }
                
                // Mustache
                context.fillStyle = '#654321';
                context.fillRect(x + 12, y + 15, 16, 4);
                
                // Overalls (blue)
                context.fillStyle = '#3498db';
                context.fillRect(x + 8, y + 20, 12, 8);
                context.fillRect(x + 20, y + 20, 12, 8);
                
                // Buttons
                context.fillStyle = '#f1c40f';
                context.beginPath();
                context.arc(x + 14, y + 17, 2, 0, Math.PI * 2);
                context.fill();
                context.beginPath();
                context.arc(x + 26, y + 17, 2, 0, Math.PI * 2);
                context.fill();
                
                // Legs
                context.fillStyle = '#2980b9';
                context.fillRect(x + 10, y + 28, 8, 12);
                context.fillRect(x + 22, y + 28, 8, 12);
                
                // Shoes
                context.fillStyle = '#8B4513';
                context.fillRect(x + 8, y + 36, 10, 4);
                context.fillRect(x + 22, y + 36, 10, 4);
            }
        }

        function updateCharacterPosition() {
            characterCanvas.style.left = player.x + 'px';
            characterCanvas.style.top = player.y + 'px';
            drawCharacter(charCtx, player.direction);
        }

        function checkIfInside() {
            const rect = canvas.getBoundingClientRect();
            
            // Check if player is fully inside canvas
            if (player.x >= rect.left && 
                player.x + player.width <= rect.right &&
                player.y >= rect.top && 
                player.y + player.height <= rect.bottom) {
                player.insideCanvas = true;
            }
        }

        function move(direction) {
            const step = 40;
            
            player.direction = direction;
            
            let newX = player.x;
            let newY = player.y;
            
            if (direction === 'right') {
                newX += step;
            } else if (direction === 'left') {
                newX -= step;
            } else if (direction === 'up') {
                newY -= step;
            } else if (direction === 'down') {
                newY += step;
            }
            
            // If not inside yet, allow free movement
            if (!player.insideCanvas) {
                player.x = newX;
                player.y = newY;
                checkIfInside();
            } else {
                // Once inside, enforce canvas boundaries
                const rect = canvas.getBoundingClientRect();
                
                if (direction === 'right') {
                    player.x = Math.min(newX, rect.right - player.width);
                } else if (direction === 'left') {
                    player.x = Math.max(newX, rect.left);
                } else if (direction === 'up') {
                    player.y = Math.max(newY, rect.top);
                } else if (direction === 'down') {
                    player.y = Math.min(newY, rect.bottom - player.height);
                }
            }
            
            updateCharacterPosition();
        }

        upBtn.addEventListener('click', () => move('up'));
        leftBtn.addEventListener('click', () => move('left'));
        rightBtn.addEventListener('click', () => move('right'));
        downBtn.addEventListener('click', () => move('down'));

        updateCharacterPosition();
    </script>
</body>
</html>